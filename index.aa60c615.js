const e={tiles:document.querySelectorAll(".field-cell"),startBtn:document.querySelector(".start"),gameScore:document.querySelector(".game-score"),gameStartMsg:document.querySelector(".message-start"),gameOverMsg:document.querySelector(".message-lose"),gameWonMsg:document.querySelector(".message-win")};let t=o();function r(t){let r=0;for(;r<t;){let t=Math.floor(Math.random()*e.tiles.length),n=e.tiles[t];!n.textContent&&(s(n,Math.random()>=.9?4:2),r++)}}function n(e){for(let t=0;t<4;t++)for(let r=0;r<3;r++)if(e[t][r]===e[t][r+1])return!0;return!1}function o(){let t=0,r=[];for(let n=0;n<4;n++){r[n]||(r[n]=[]);for(let o=0;o<4;o++)r[n].push(+e.tiles[t].textContent||0),t++}return r}function s(e,t){e.textContent=t||"",e.className=`field-cell field-cell--${t}`}function l(u){let f;if("ArrowLeft"!==u.key&&"ArrowRight"!==u.key&&"ArrowUp"!==u.key&&"ArrowDown"!==u.key)return;t=o();let m=!1;switch(u.key){case"ArrowLeft":f=a(t);break;case"ArrowRight":f=i(t);break;case"ArrowUp":f=c(a(c(t)));break;case"ArrowDown":f=c(i(c(t)))}if(!function(e,t){if(e.length!==t.length)return!1;for(let r=0;r<4;r++)for(let n=0;n<4;n++)if(e[r][n]!==t[r][n])return!1;return!0}(t,f)&&(function(t){let r=0;for(let n=0;n<4;n++)for(let o=0;o<4;o++)s(e.tiles[r],t[n][o]),r++}(f),m=!0),m&&[...e.tiles].some(e=>2048==+e.textContent)){e.gameWonMsg.classList.remove("hidden"),window.removeEventListener("keyup",l);return}m&&r(1),d(t=o())||function(e){let t=c(e),r=d(e),o=n(e),s=n(t);return r||o||s}(t)||(e.gameOverMsg.classList.remove("hidden"),window.removeEventListener("keyup",l))}function a(t){let r=[];for(let n=0;n<4;n++){let o=u(t[n]);for(let t=0;t<3;t++)o[t]&&o[t]===o[t+1]&&(o[t]*=2,o[t+1]=0,e.gameScore.textContent=+e.gameScore.textContent+ +o[t]);o=f(o=u(o)),r.push(o)}return r}function i(t){let r=[];for(let n=0;n<4;n++){let o=u(t[n]).reverse();for(let t=0;t<3;t++)o[t]&&o[t]===o[t+1]&&(o[t]*=2,o[t+1]=0,e.gameScore.textContent=+e.gameScore.textContent+ +o[t]);o=f(o=u(o)).reverse(),r.push(o)}return r}function c(e){let t=[];for(let r=0;r<4;r++)for(let n=0;n<4;n++)t[r]||(t[r]=[]),t[r].push(e[n][r]);return t}function u(e){return e.filter(e=>e&&e>0)}function f(e){for(let t=0;t<4;t++)e[t]||e.push(0);return e}function d(e){return e.flatMap(e=>e).filter(e=>0===e).length>0}e.startBtn.addEventListener("click",function(){window.removeEventListener("keyup",l),[...e.tiles].forEach(e=>{e.textContent="",e.className="field-cell"}),e.gameStartMsg.classList.add("hidden"),e.gameOverMsg.classList.add("hidden"),e.gameWonMsg.classList.add("hidden"),e.startBtn.classList.remove("start"),e.startBtn.classList.add("restart"),e.startBtn.textContent="Restart",e.gameScore.textContent=0,window.addEventListener("keyup",l),r(2)});
//# sourceMappingURL=index.aa60c615.js.map
