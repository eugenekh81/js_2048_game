!function(){function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(t,r){if(t){if("string"==typeof t)return e(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e(t,r)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var r={tiles:document.querySelectorAll(".field-cell"),startBtn:document.querySelector(".start"),gameScore:document.querySelector(".game-score"),gameStartMsg:document.querySelector(".message-start"),gameOverMsg:document.querySelector(".message-lose"),gameWonMsg:document.querySelector(".message-win")},n=i();function o(e){for(var t=0;t<e;){var n=Math.floor(Math.random()*r.tiles.length),o=r.tiles[n];!o.textContent&&(s(o,Math.random()>=.9?4:2),t++)}}function a(e){for(var t=0;t<4;t++)for(var r=0;r<3;r++)if(e[t][r]===e[t][r+1])return!0;return!1}function i(){for(var e=0,t=[],n=0;n<4;n++){t[n]||(t[n]=[]);for(var o=0;o<4;o++)t[n].push(+r.tiles[e].textContent||0),e++}return t}function s(e,t){e.textContent=t||"",e.className="field-cell field-cell--".concat(t)}function u(e){if("ArrowLeft"===e.key||"ArrowRight"===e.key||"ArrowUp"===e.key||"ArrowDown"===e.key){n=i();var m,d,g,y,h,p,w=!1;switch(e.key){case"ArrowLeft":p=c(n);break;case"ArrowRight":p=f(n);break;case"ArrowUp":p=l(c(l(n)));break;case"ArrowDown":p=l(f(l(n)))}if(!function(e,t){if(e.length!==t.length)return!1;for(var r=0;r<4;r++)for(var n=0;n<4;n++)if(e[r][n]!==t[r][n])return!1;return!0}(n,p)&&(function(e){for(var t=0,n=0;n<4;n++)for(var o=0;o<4;o++)s(r.tiles[t],e[n][o]),t++}(p),w=!0),w&&t(r.tiles).some(function(e){return 2048==+e.textContent})){r.gameWonMsg.classList.remove("hidden"),window.removeEventListener("keyup",u);return}w&&o(1),v(n=i())||(d=l(m=n),g=v(m),y=a(m),h=a(d),g||y||h)||(r.gameOverMsg.classList.remove("hidden"),window.removeEventListener("keyup",u))}}function c(e){for(var t=[],n=0;n<4;n++){for(var o=m(e[n]),a=0;a<3;a++)o[a]&&o[a]===o[a+1]&&(o[a]*=2,o[a+1]=0,r.gameScore.textContent=+r.gameScore.textContent+ +o[a]);o=d(o=m(o)),t.push(o)}return t}function f(e){for(var t=[],n=0;n<4;n++){for(var o=m(e[n]).reverse(),a=0;a<3;a++)o[a]&&o[a]===o[a+1]&&(o[a]*=2,o[a+1]=0,r.gameScore.textContent=+r.gameScore.textContent+ +o[a]);o=d(o=m(o)).reverse(),t.push(o)}return t}function l(e){for(var t=[],r=0;r<4;r++)for(var n=0;n<4;n++)t[r]||(t[r]=[]),t[r].push(e[n][r]);return t}function m(e){return e.filter(function(e){return e&&e>0})}function d(e){for(var t=0;t<4;t++)e[t]||e.push(0);return e}function v(e){return e.flatMap(function(e){return e}).filter(function(e){return 0===e}).length>0}r.startBtn.addEventListener("click",function(){window.removeEventListener("keyup",u),t(r.tiles).forEach(function(e){e.textContent="",e.className="field-cell"}),r.gameStartMsg.classList.add("hidden"),r.gameOverMsg.classList.add("hidden"),r.gameWonMsg.classList.add("hidden"),r.startBtn.classList.remove("start"),r.startBtn.classList.add("restart"),r.startBtn.textContent="Restart",r.gameScore.textContent=0,window.addEventListener("keyup",u),o(2)})}();
//# sourceMappingURL=index.4aae88b0.js.map
